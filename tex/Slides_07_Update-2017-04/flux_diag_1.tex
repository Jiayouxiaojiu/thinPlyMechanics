\documentclass{standalone}

\usepackage{tikz}
\usepackage{adjustbox}
\usepackage{animate}
\usepackage{ifthen}
\usepackage{amsmath}

\usetikzlibrary{decorations.pathreplacing,positioning,shapes,shadows,arrows}

\begin{document}



% WORKFLOW OF COMPOSITE STRUCTURAL DESIGN
%\begin{frame}
\begin{adjustbox}{max totalsize={\textwidth}{\textheight},center}
\begin{animateinline}[poster=first,controls]{8}%
   \multiframe{8}{icount=1+1}{
\begin{tikzpicture}[node distance=2cm]

\tikzstyle{node_type1}=[rectangle, draw=black, rounded corners, fill=red!80, drop shadow,
        text centered, anchor=north, text=black, text width=12cm]

\tikzstyle{node_type2}=[ellipse, draw=black, fill=blue!40, drop shadow,
        text centered, anchor=north, text=white]

\tikzstyle{node_type3}=[rectangle, draw=black, rounded corners, fill=green!99, drop shadow,
        text centered, anchor=north, text=black, text width=2cm]

\tikzstyle{node_type4}=[rectangle, draw=black, rounded corners, fill=green!30, drop shadow,
        text centered, text=black]

\tikzstyle{node_type5}=[rectangle, draw=black, rounded corners, fill=blue!40, drop shadow,
        text centered, anchor=north, text=white, text width=4cm]

\tikzstyle{node_type6}=[ellipse, draw=black,  fill=red!80, drop shadow,
        text centered, anchor=north, text=black]

\tikzstyle{fillnode}=[rectangle, draw=none, rounded corners, fill=none,text centered]

\tikzstyle{nullnode}=[rectangle, draw=none, rounded corners, fill=none,text centered, text=white]

\tikzstyle{line}=[-, thick]

\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

           \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [nullnode, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
          \node (microsim) [nullnode, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };

         \node (geometry) [nullnode,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \node (RVE) [nullnode,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };

         \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [nullnode, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [nullnode, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };


       \node (lamina) [nullnode, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };

          \node (UDmeas) [nullnode, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [nullnode, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };

          \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };


\ifthenelse{\icount > 1}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

           \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [nullnode,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \node (RVE) [nullnode,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };

         \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [nullnode, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [nullnode, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };


       \node (lamina) [nullnode, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };

          \node (UDmeas) [nullnode, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [nullnode, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };

          \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


       \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}

\ifthenelse{\icount > 2}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

         \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

         \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [nullnode, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [nullnode, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };


      \node (lamina) [nullnode, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };

         \node (UDmeas) [nullnode, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [nullnode, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };

         \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}

\ifthenelse{\icount > 3}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};

\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

          \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

         \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [node_type1, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [node_type1, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };
        \draw[->][thick] (RVE.south) -- (homogenization1.north);
        \draw[->][dashed,thick] (RVE.south) -- (homogenization2.north);


      \node (lamina) [nullnode, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };

         \node (UDmeas) [nullnode, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [nullnode, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };

         \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}

\ifthenelse{\icount > 4}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

          \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

          \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [node_type1, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [node_type1, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };
        \draw[->][thick] (RVE.south) -- (homogenization1.north);
        \draw[->][dashed,thick] (RVE.south) -- (homogenization2.north);


      \node (lamina) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };
        \draw[->][thick] (homogenization1.south) -- (lamina.north);
        \draw[->][dashed,thick] (homogenization2.south) -- (lamina.north);



         \node (UDmeas) [nullnode, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [nullnode, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };

          \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}

\ifthenelse{\icount > 5}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

         \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

          \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [node_type1, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [node_type1, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };
        \draw[->][thick] (RVE.south) -- (homogenization1.north);
        \draw[->][dashed,thick] (RVE.south) -- (homogenization2.north);


       \node (lamina) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };
        \draw[->][thick] (homogenization1.south) -- (lamina.north);
        \draw[->][dashed,thick] (homogenization2.south) -- (lamina.north);



          \node (UDmeas) [node_type1, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [node_type6, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };
        \draw[->][dashed] (UDmeas.west) -- (lamina.east);
        \draw[->][dotted] (UDmeas.north) -- (UDcomm.south);
        \draw[->][dotted] (UDcomm.west) -- (homogenization1.east);



         \node (geometry2) [nullnode,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [nullnode,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}

\ifthenelse{\icount > 6}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
       {
         \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

           \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

        \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

          \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [node_type1, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [node_type1, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };
        \draw[->][thick] (RVE.south) -- (homogenization1.north);
        \draw[->][dashed,thick] (RVE.south) -- (homogenization2.north);


      \node (lamina) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };
        \draw[->][thick] (homogenization1.south) -- (lamina.north);
        \draw[->][dashed,thick] (homogenization2.south) -- (lamina.north);



         \node (UDmeas) [node_type1, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [node_type6, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };
        \draw[->][dashed] (UDmeas.west) -- (lamina.east);
        \draw[->][dotted] (UDmeas.north) -- (UDcomm.south);
        \draw[->][dotted] (UDcomm.west) -- (homogenization1.east);



         \node (geometry2) [node_type5,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [node_type2,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };
            \draw[->][thick] (lamina.south) -- (geometry2.north);
            \draw[->][thick] (geometry2.south) -- (CLT.north);


      \node (laminate) [nullnode, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };

}{}


\ifthenelse{\icount > 7}% 
{  
\node (fiber_properties) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=east]
       {
         \scshape Fiber Properties\\\textit{isotropic or transversely isotropic}
        \nodepart{second} $E_{\left(x\right),f}\ \left(E_{z,f}\right),\ \nu_{\left( xy\right),f}\ \left(\nu_{xz,f}\right),\ G_{\left( yz\right),f}$\\$\alpha_{\left(x\right),f}\ \left(\alpha_{z,f}\right),\ \kappa_{\left(x\right),f}\   \left(\kappa_{z,f}\right),\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

\node(start)[fillnode,right of=fiber_properties, text width=10cm,anchor=west]
{
};
\node (matrix_properties) [node_type4, rectangle split, rectangle split parts=2, text width=6cm,right of=start,anchor=west]
{
    \scshape Matrix Properties\\\textit{isotropic}
        \nodepart{second} $E_{m},\ \nu_{m},\ G_{m},\ \alpha_{f},\ \kappa_{f},\ C_{V,f}$\\$\bar{\sigma}_{T}^{f},\ \bar{\sigma}_{C}^{f},\ \bar{\tau}_{xy}^{f}\ \left(\bar{\tau}_{xz}^{f}\right)$
       };

        \node(start3)[fillnode,above of=start, anchor=south, node distance=4cm]
           {
           };
           \node (micromeas) [node_type1, text width=4cm,left of=start3,anchor=east, node distance=1.25cm]
           {
             \bfseries Experimentally measured
              };
         \draw[->][dashed] (micromeas.south) -- (fiber_properties.north);
         \draw[->][dashed] (micromeas.south) -- (matrix_properties.north);
          \node (microsim) [node_type1, text width=5cm,right of=start3,anchor=west, node distance=.5cm]
           {
             \bfseries Ab-initio calculations (Molecular Dynamics, Density Functional Theory,\dots)
              };
         \draw[->][dashed] (microsim.south) -- (fiber_properties.north);
         \draw[->][dashed] (microsim.south) -- (matrix_properties.north);

         \node (geometry) [node_type5,  rectangle split, rectangle split parts=2, text width=6cm,below of=start,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} \textit{randomly distributed short-fibers, longitudinally aligned long-fibers, 2D fabrics, 3D fabrics, \dots}
              };
           \draw[->][thick] (fiber_properties.south) -- (geometry.north);
           \draw[->][thick] (matrix_properties.south) -- (geometry.north);
           \node (RVE) [node_type2,text width=1cm, below of=geometry,anchor=north]
           {
             \bfseries RVE
              };
         \draw[->] (geometry.south) -- (RVE.north);

          \node(start2)[fillnode,below of=RVE, text width=5cm,anchor=north]
           { 
           };      
           \node (homogenization1) [node_type1, text width=4cm,left of=start2,anchor=east]
           {
             \bfseries Rule of mixtures
              };
           \node (homogenization2) [node_type1, text width=5cm,right of=start2,anchor=west]
           {
             \bfseries Higher order theories\\Semi-empirical methods\\Non-linear models\\Variational methods
              };
        \draw[->][thick] (RVE.south) -- (homogenization1.north);
        \draw[->][dashed,thick] (RVE.south) -- (homogenization2.north);


      \node (lamina) [node_type4, rectangle split, rectangle split parts=2, text width=8cm, anchor=north, below of=start2, node distance=4cm]
       {
         \scshape Lamina Properties\\\textit{transversely isotropic}
        \nodepart{second} $E_{1},\ E_{2},\ \nu_{12},\ \nu_{13},\ G_{23}$\\$\alpha_{1},\ \alpha_{2},\ \kappa_{1},\ \kappa_{2},\ C_{V,l}$\\$\bar{\sigma}_{1}^{T},\ \bar{\sigma}_{1}^{C},\ \bar{\sigma}_{2}^{T},\ \bar{\sigma}_{2}^{C},\ \bar{\tau}_{12},\ \bar{\tau}_{13}$\\$\varphi_{lamina}=\varphi\left(\varphi_{i,f},\varphi_{i,m},\text{RVE geometry}\right)$
       };
        \draw[->][thick] (homogenization1.south) -- (lamina.north);
        \draw[->][dashed,thick] (homogenization2.south) -- (lamina.north);



          \node (UDmeas) [node_type1, text width=4cm,right of=lamina,anchor=west, node distance=10cm]
           {
             \bfseries Measured on UD laminate
              };
           \node (UDcomm) [node_type6, text width=5cm,above of=UDmeas,anchor=south, node distance=7cm]
           {
             \bfseries (usually) in good agreement with
              };
        \draw[->][dashed] (UDmeas.west) -- (lamina.east);
        \draw[->][dotted] (UDmeas.north) -- (UDcomm.south);
        \draw[->][dotted] (UDcomm.west) -- (homogenization1.east);



          \node (geometry2) [node_type5,  rectangle split, rectangle split parts=2, text width=10cm,below of=lamina,anchor=north, node distance=3cm]
           {
             \scshape Geometry
             \nodepart{second} $\begin{Bmatrix}t_{k}\\\theta_{k}\\ N\end{Bmatrix}\quad\text{with}\ k\in\left[1, N\right],\quad N = \text{total number of plies}$
              };
           \node (CLT) [node_type2,text width=1cm, below of=geometry2,anchor=north]
           {
             \bfseries CLT
              };
            \draw[->][thick] (lamina.south) -- (geometry2.north);
            \draw[->][thick] (geometry2.south) -- (CLT.north);


       \node (laminate) [node_type4, rectangle split, rectangle split parts=2, text width=12cm, anchor=north, below of=CLT, node distance=4cm]
       {
         \scshape Laminate Properties\\\textit{quasi-isotropic, transversely isotropic, orthotropic, anisotropic}
        \nodepart{second} $\begin{Bmatrix}\sigma_{x}\\\sigma_{y}\\\sigma_{z}\\\tau_{xy}\\\tau_{xz}\\\tau_{yz}\end{Bmatrix}=\begin{bmatrix}A\qquad B\\[10pt] B\qquad D\end{bmatrix}\begin{Bmatrix}\varepsilon_{x}\\\varepsilon_{y}\\\varepsilon_{z}\\\gamma_{xy}\\\gamma_{xz}\\\gamma_{yz}\end{Bmatrix}$\\$\varphi_{laminate}=\varphi\left(\varphi_{ik,lamina}, t_{k},\theta_{k}, N\right)$
       };
     \draw[->][thick] (CLT.south) -- (laminate.north);
}{}

\end{tikzpicture}
}
\end{animateinline}
\end{adjustbox}
%\end{frame}
\end{document}